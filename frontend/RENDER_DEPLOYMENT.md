# üöÄ Render Deployment Guide for Geine-Support Backend

## üìã Prerequisites

1. **GitHub Repository**: Your code must be uploaded to GitHub first
2. **Render Account**: Sign up at [render.com](https://render.com)
3. **Environment Variables**: Your Gemini API key and other configs

## üîß Step-by-Step Deployment

### Step 1: Upload to GitHub
If you haven't already:
1. Create repository on GitHub
2. Upload your project (excluding `.env` file)
3. Ensure `backend/` folder contains all necessary files

### Step 2: Create Render Service

1. **Go to Render Dashboard**
   - Visit [dashboard.render.com](https://dashboard.render.com)
   - Click "New +"
   - Select "Web Service"

2. **Connect Repository**
   - Choose "Build and deploy from a Git repository"
   - Connect your GitHub account
   - Select your `geine-support` repository
   - Click "Connect"

3. **Configure Service**
   ```
   Name: geine-support-backend
   Environment: Python 3
   Region: Oregon (US West)
   Branch: main
   Root Directory: backend
   Build Command: pip install -r requirements.txt
   Start Command: python -m uvicorn server:app --host 0.0.0.0 --port $PORT
   ```

4. **Plan Selection**
   - Select "Free" plan for testing
   - Upgrade to "Starter" ($7/month) for production

### Step 3: Environment Variables

Add these environment variables in Render dashboard:

**Required Variables:**
```
GEMINI_API_KEY=your_actual_gemini_api_key_here
AI_PROVIDER=gemini
ENV=production
PORT=(auto-generated by Render)
```

**Database Configuration:**
```
MONGO_URL=mongodb+srv://username:password@cluster.mongodb.net/supportgenie
DB_NAME=supportgenie
```

**CORS Configuration:**
```
CORS_ORIGINS=https://your-frontend-domain.com,https://www.your-frontend-domain.com
```

### Step 4: Deploy

1. Click "Create Web Service"
2. Render will automatically:
   - Clone your repository
   - Install dependencies
   - Start your application
3. Wait 5-10 minutes for initial deployment

## üåê Your Backend URLs

After deployment, you'll get:
- **Live URL**: `https://geine-support-backend.onrender.com`
- **API Base**: `https://geine-support-backend.onrender.com/api`

### Test Your Deployment

```bash
# Health check
curl https://geine-support-backend.onrender.com/api/health

# Test chat endpoint
curl -X POST https://geine-support-backend.onrender.com/api/chat \
  -H "Content-Type: application/json" \
  -d '{"message": "Hello", "session_id": "test", "brand_tone": "friendly"}'
```

## üìä Monitoring & Logs

1. **View Logs**: Render Dashboard ‚Üí Your Service ‚Üí Logs
2. **Monitor Performance**: Check CPU/Memory usage
3. **Auto-Scaling**: Available on paid plans

## üîß Troubleshooting

### Common Issues:

1. **Build Fails**
   ```
   Solution: Check requirements.txt for correct versions
   Make sure all dependencies are listed
   ```

2. **Port Issues**
   ```
   Error: Port already in use
   Solution: Use $PORT environment variable (auto-provided by Render)
   ```

3. **Database Connection**
   ```
   Error: MongoDB connection failed
   Solution: 
   - Use MongoDB Atlas
   - Whitelist Render's IP ranges: 0.0.0.0/0 (for simplicity)
   - Check connection string format
   ```

4. **CORS Errors**
   ```
   Error: CORS policy blocks requests
   Solution: Update CORS_ORIGINS with your frontend domain
   ```

5. **API Key Issues**
   ```
   Error: Gemini API authentication failed
   Solution: 
   - Verify API key is correct
   - Check API quota/limits
   - Ensure key has proper permissions
   ```

## üöÄ Performance Optimization

### For Production:

1. **Upgrade Plan**: Use Starter plan ($7/month) for better performance
2. **Database**: Use MongoDB Atlas clusters
3. **Caching**: Consider Redis for session storage
4. **Monitoring**: Set up health checks and alerts

### Environment Variables for Production:
```env
ENV=production
DEBUG=false
LOG_LEVEL=info
WORKERS=2
```

## üîí Security Best Practices

1. **Environment Variables**: Never commit API keys to GitHub
2. **CORS**: Set specific origins, not wildcard (*)
3. **HTTPS**: Render provides SSL automatically
4. **API Limits**: Implement rate limiting
5. **Monitoring**: Set up error tracking (Sentry)

## üìà Scaling Options

1. **Vertical Scaling**: Upgrade to higher tier plans
2. **Horizontal Scaling**: Multiple instances (Pro plans)
3. **Database Scaling**: MongoDB Atlas auto-scaling
4. **CDN**: Use for static assets

## üí∞ Cost Estimation

| Plan | Price | Resources | Best For |
|------|-------|-----------|----------|
| Free | $0 | 512MB RAM, Sleeps after 15min | Testing |
| Starter | $7/month | 1GB RAM, Always on | Small apps |
| Standard | $25/month | 2GB RAM, Auto-scaling | Production |

## üÜò Support Resources

- **Render Docs**: [docs.render.com](https://docs.render.com)
- **Community**: [community.render.com](https://community.render.com)
- **Status Page**: [status.render.com](https://status.render.com)

## ‚úÖ Deployment Checklist

- [ ] Code uploaded to GitHub (without .env)
- [ ] Render account created
- [ ] Service configured with correct settings
- [ ] Environment variables added
- [ ] MongoDB Atlas configured
- [ ] CORS origins updated
- [ ] Deployment successful
- [ ] API endpoints tested
- [ ] Frontend updated with backend URL

---

Your backend will be live at: `https://geine-support-backend.onrender.com` üéâ